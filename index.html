<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Minesweeper game</title>
    <style type="text/css">

        /* Generated by Font Squirrel (https://www.fontsquirrel.com) on September 12, 2016 */
        @font-face {
            font-family: 'digital-7';
            src: url('assets/fonts/digital-7/digital-7.mono.eot');
            src: url('assets/fonts/digital-7/digital-7.mono.eot?#iefix') format('embedded-opentype'),
                 url('assets/fonts/digital-7/digital-7.mono.woff2') format('woff2'),
                 url('assets/fonts/digital-7/digital-7.mono.woff') format('woff'),
                 url('assets/fonts/digital-7/digital-7.mono.ttf') format('truetype'),
                 url('assets/fonts/digital-7/digital-7.mono.svg#digital-7_monomono') format('svg');
            font-weight: normal;
            font-style: normal;
        }

        /* Custom styles */
        dl {
            border:2px solid white;
            border-left-color:#7b7b7b;
            border-top-color:#7b7b7b;
            margin:0;
            min-height:26px;
            padding:3px 6px;
            position:relative;
            text-align:center;
        }
        dd {
            margin:0;
        }
        .show-for-sr {
            left: -999em;
            position: absolute;
            top: -999em;
        }
        .health-status {
            border:1px solid #7b7b7b;
            border-bottom-width:0;
            border-right-width:0;
            height:24px;
            margin:0 auto;
            width:24px;
        }
        .health-status button {
            background:transparent url('assets/img/sprite.png') no-repeat 1px -27px;
            border:2px solid white;
            border-bottom-color:#7b7b7b;
            border-right-color:#7b7b7b;
            margin:0 auto;
            height:25px;
            width: 25px;
        }
        .health-status button:focus {
            outline:none;
        }
        .health-status button:active {
            border:1px solid #7b7b7b;
            outline:none;
        }
        .health-status .dead {
            background-position-x:-43px;
        }
        .health-status .anxious {
            background-position-x:-21px;
        }
        .health-status .safe {
            background-position-x:-65px;
        }
        .digital {
            background:#000;
            color:#ff0000;
            font-family: 'digital-7';
            font-size:29px;
            line-height:.8;
        }
        .mines-remaining {
            left:6px;
            position:absolute;
            top:4px;
        }
        .time-taken {
            position:absolute;
            right:6px;
            top:4px;
        }
        section {
            background:#bdbdbd;
            border:2px solid white;
            border-bottom-color:#7b7b7b;
            border-right-color:#7b7b7b;
            display:inline-block;
            padding:6px;
        }
        table {
            border:2px solid white;
            border-left-color:#7b7b7b;
            border-spacing: 0;
            border-top-color:#7b7b7b;
        }
        td {
            background:#bdbdbd url('assets/img/sprite.png') no-repeat 15px 0;
            border: 1px solid #7b7b7b;
            border-width:1px 0 0 1px;
            height:15px;
            padding:0;
            width:15px;
        }
        .covered {
            border-width:2px;
            border-top-color:#fff;
            border-left-color:#fff;
            height:12px;
            width:12px;
        }
        .next-to-one-mine {
            background-position-x:0;
        }
        .next-to-two-mines {
            background-position-x:-15px;
        }
        .next-to-three-mines {
            background-position-x:-30px;
        }
        .next-to-four-mines {
            background-position-x:-45px;
        }
        .next-to-five-mines {
            background-position-x:-60px;
        }
        .next-to-six-mines {
            background-position-x:-75px;
        }
        .next-to-seven-mines {
            background-position:0 -15px;
        }
        .next-to-eight-mines {
            background-position:-15px -15px;
        }
        .mine-marked {
            background-position:-30px -15px;
        }
        .mine-possibility {
            background-position:-45px -15px;
        }
        .mine-triggered {
            background-position:-60px -15px;
        }
        .mine {
            background-position:-75px -15px;
        }
    </style>
</head>
<body>
    <h1>Minesweeper</h1>
    <section>
        <dl>
            <dt class="show-for-sr">Mines remaining</dt>
                <dd class="digital mines-remaining">099</dd>
            <dt class="show-for-sr">Game Status</dt>
                <dd class="health-status">
                    <button>
                        <span class="show-for-sr">Alive</span>
                    </button>
                </dd>
            <dt class="show-for-sr">Time taken</dt>
                <dd class="digital time-taken">000<span class="show-for-sr"> seconds</span></dd>
        </dl>
        <table>
            <thead class="show-for-sr">
                <tr>
                    <th></th>
                    <th>Column 1</th>
                    <th>Column 2</th>
                    <th>Column 3</th>
                    <th>Column 4</th>
                    <th>Column 5</th>
                    <th>Column 6</th>
                    <th>Column 7</th>
                    <th>Column 8</th>
                    <th>Column 9</th>
                    <th>Column 10</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th class="show-for-sr">Row 1</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 2</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 3</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 4</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 5</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 6</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 7</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 8</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 9</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
                <tr>
                    <th class="show-for-sr">Row 10</th>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                    <td class="covered"><span class="show-for-sr">Covered</span></td>
                </tr>
            </tbody>
        </table>
    </section>
    <script type="text/javascript" src="node_modules/joose-utils/js/joose-utils.min.js"></script>
    <script type="text/javascript">

        // set config
        var config = {
            columns: 10,
            rows: 10
        }

        // game status :::::: TO MAKE PRIVATE
        var gameStatus = {
            health: 'alive',
            numberOfMines: 10,
            board: [
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty'],
                ['empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty', 'empty']
            ]
        };

        // bind elements
        var gameTable = document.querySelector('table');
        var gameButton = document.querySelector('.health-status button');

        // generate a random number between 0 and max supplied
        var getRandomNumber = function(max) {
            return (Math.floor(Math.random() * max));
        };
        
        // assign a state to a table cell
        var assignStates = function(state, limit) {

            for (var i=1; i<limit; i++) {

                var x = getRandomNumber(config.columns);
                var y = getRandomNumber(config.rows);

                gameStatus.board[x][y] = state;

            }

        }

        var renderBoard = function() {
            for (var i=1; i<=gameStatus.board.length; i++) {
                for (var j=1; j<=gameStatus.board[0].length; j++) {
                    
                    // temp to show state
                    joose.utils.removeClass(gameTable.querySelector('tr:nth-child(' + i + ') td:nth-child(' + (j + 1) + ')'), 'covered');
                    
                    joose.utils.addClass(gameTable.querySelector('tr:nth-child(' + i + ') td:nth-child(' + (j + 1) + ')'), gameStatus.board[i][j]);
                }
            }
        }

        // setup a new game
        var setupNewGame = function() {
            assignStates('mine', gameStatus.numberOfMines);
            renderBoard();
        };

        // bind events
        gameButton.addEventListener('click', setupNewGame);

        // initialise new game on page load
        setupNewGame();

    </script>
</body>
</html>